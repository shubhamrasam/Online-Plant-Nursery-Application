<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Plant</title>
    <link rel="stylesheet" href="common.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

</head>

<body>
    <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
        <a 
        href="#"
        class="navbar-brand mb-0 h6 text-success"> 
        <img class="d-inline-block align top"
        src="https://user-images.githubusercontent.com/87129673/229336907-dd5e4aea-56bd-494d-a7fe-4578c8c093d9.png" width="40" height="40" alt=""> 
        
        Plant nursary
         </a>
         <button
         type="button"
         data-bs-toggle="collapse"
         data-bs-target="#navbarNav"
          class="navbar-toggler"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
          >
          <span class="navbar-toggler-icon"></span>
    
         </button>
         <div class="collapse navbar-collapse " id="navbarNav">
            <ul class="navbar-nav ">
                <li class="nav-item active">
                    <a href="index.htl" class="nav-link active">
                        <h6 class="text-success">Home</h6>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="order.html" class="nav-link active">
                        <h6 class="text-success">CRUD Order</h6>
                    </a>
                </li>
                <li class="nav-item active ">
                    <a href="plant.html" class="nav-link active">
                        <h6 class="text-success">CRUD Plant</h6>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="planter.html" class="nav-link active">
                        <h6 class="text-success">CRUD PLANTER</h6> 
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="seed.html" class="nav-link active">
                        <h6 class="text-success">CRUD SEED</h6>
                    </a>
                </li>
              
            </ul>
         </div>
        </nav>

 <div id="parent">
    <div id="post">
        <input type="text" id="key" placeholder="Enter Admin login key"><br>
        <input type="number" id="height" placeholder="Enter height of plant"><br>
        <input type="text" id="spread" placeholder="Enter plant spread details"><br>
        <input type="text" id="name" placeholder="Enter plant common Name"><br>
        <input type="text" id="time" placeholder="Enter Enter bllom time"><br>
        <input type="text" id="med" placeholder="Enter Medicinal use"><br>
        <input type="text" id="diff" placeholder="Enter diffcultylevel to grow plant"><br>
        <input type="text" id="temp" placeholder="Enter temprature of plant"><br>        
        <input type="text" id="type" placeholder="Enter Types of plant"><br>
        <input type="text" id="desc" placeholder="Enter plant desccription"><br>
        <input type="number" id="stock" placeholder="Enter plant stock"><br>
        <input type="number" id="cost" placeholder="Enter plant cost"><br>
        <input type="text" id="url" placeholder="Enter url of seed"><br>
        <button id="btn">Add Plant</button> 
        

    </div>
    <div id="delete">
        <input type="text" id="keys" placeholder="Enter admin login key"><br>
        <input type="text" id="plantid" placeholder="Enter Id of plant"><br>
       <button id="dbtn">Delete Order</button> 
   </div>


   <div id="patch">
       <input type="text" id="pkey" placeholder="Enter Customer login key"><br>
       
       <button id="ubtn"> Update Order</button>

   </div>   
 </div>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>

</html>
<script >
    let btn=document.getElementById("btn")
btn.onclick=()=>{
    regData()
}

async function regData(){
    try{
        let register_data={
            plantHeight:document.getElementById("height").value,
            plantSpread:document.getElementById("spread").value,
            plantCommonName:document.getElementById("name").value,
            bloomTime:document.getElementById("time").value,
            medicinalCulinaryUse:document.getElementById("med").value,
            difficultyLevel:document.getElementById("diff").value,
            temparature:document.getElementById("temp").value,
            typeOfPlant:document.getElementById("type").value,
            plantDescription:document.getElementById("desc").value,
            plantStock:document.getElementById("stock").value,
            plantCost:document.getElementById("cost").value,
            url:document.getElementById("url").value 
            
        }
        let key=document.getElementById("key").value
        let res=await fetch(`http://localhost:8088/plants/add?key=${key}`,{
            method:'POST',
            body:JSON.stringify(register_data),
            headers:{
                'Content-Type':'application/json'
            }
        })
       
        let data=await res.json();
        console.log("data",data)
        let status=await res.status;
        console.log("Status",status)
        

    }catch(error){
        console.log("error ",error)
    }
}
let dbtn=document.getElementById("dbtn")
dbtn.onclick=()=>{
    deletePlant();
}
   

let deletePlant=async()=>{
    try{
        let plantId=document.getElementById("plantid").value      
        let key=document.getElementById("keys").value
        let res=await fetch(`http://localhost:8088/plants/delete/${plantId}?key=${key}`,{
            method:'DELETE',            
            headers:{
                'Content-Type':'application/json'
            }
        })
        let data=await res.json();
        console.log("data",data)
        let status=await res.status;
        console.log("Status",status)
        
            alert("Order deleted")
        

    }catch(error){
        console.log("error ",error)

    }
}


</script>